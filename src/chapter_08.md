# 8. 조건문

## 8-1. 제어문

### 제어문이란?

- 조건에 따라 실행 흐름을 변경할 수 있도록 제어문(Control Statement)이라는 문법을 제공한다.
- 프로그램은 나열된 명령문을 순차적으로 실행한다.
- 특정 작업을 반복해서 수행해야 하거나 예외를 처리해야 한다면 명령문을 나열식으로 표현하는 것은 비효율적이고 어려운 작업이 될 것이다.
- C 언어에서는 다음과 같은 두 가지 형태의 제어문을 제공한다.

#### 조건문: 예외 사항에 대처하기 위한 문법

- 조건문은 특정 조건을 부여하고 해당 조건을 만족하면 지정한 문장을 수행하는 문법이다.
- 일반적으로 조건은 수식으로 표현하며 이 수식의 진리값이 참(1)이면 지정한 문장르 수행하게 된다.
- C 언어에서는 `if`, `switch`와 같은 문법이 조건문에 해당한다.

#### 반복문: 반복 행위를 효과적으로 표현하기 위한 문법

- 일정한 형태의 작업을 반복해서 수행해야 할 때 반복 조건을 부여하고, 해당 조건이 거짓이 될 때까지 지정한 문장을 계속 수행하는 문법이다.
- C 언어에서는 `for`, `while`, `do ~ while`과 같은 문법이 반복문에 해당한다.

## 8-2. if 조건문

### if 조건문의 구조

- `if` 조건문은 문법 구성이 간단하고 직관적인 표현을 사용하기 때문에 다른 조건문에 비해 많이 사용한다.

```c
if(조건 수식) 명령문;
```

- `if` 조건문은 `if ~ else` 조건문에서 `else`가 생략된 형태이다.
- ()괄호 안에 있는 조건 수식의 결과 값이 참으로 나오면 그 뒤에 명시한 명령문 1개를 수행하는 문법이다.
- 여기에서 참은 0이 아닌 모든 값을 의미한다.
- C 언어에서는 명령문이 단일 명령문과 복합 명령문으로 나뉘어 있기 때문에 `if`문은 단일 문장을 수행하는 `if`문과 복합 문장을 수행하는 `if`문의 형태로 사용하게 된다.

### 단일 문장을 수행하는 if 조건문

- 조건 수식의 결과 값이 참일 때 하나의 단일 명령문만 수행한다.

```c
#include <stdio.h>

void main() {
    int data = 5;  // 명령문 1
    if (data > 3) printf("data는 3보다 큰 수 입니다.\n");  // 명령문 2
    printf("작업 종료\n");  // 명령문 3
}
```

```text
data는 3보다 큰 수 입니다.
작업 종료
```

### 복합 문장을 수행하는 if 조건문

- 조건 수식의 결과 값이 참일 때 {}로 모아 놓은 명령문들을 모두 수행한다.

```c
#include <stdio.h>

void main() {
    int score = 92;  // 명령문 1-1
    char grade;  // 명령문 1-2

    // score >= 90 비교 연산의 결과 값은 참이기 때문에 {}에 포함된 명령문들을 모두 수행함
    if (score >= 90) {
        grade = 'A'; // 명령문 2
        printf("점수는 %d이고 등급은 %c입니다.\n", score, grade);  // 명령문 3
    }
    
    printf("작업 종료\n");  // 명령문 4
}
```

```text
점수는 92이고 등급은 A입니다.
작업 종료
```

### if 조건문을 사용할 때 주의 사항

- `if`조건문을 사용할 때 대입 연산자와 관계 연산자를 혼동하거나 세미콜론으로 인한 오류에 주의해야 한다.

#### 대입 연산자와 관계 연산자의 혼동

- 대입 연산자를 잘못 사용한 예

```c
int data = 5;
if(data = 3) {
    // data는 3에서 4가 됨
    data++;
}
// 최종 data 값은 4
```

> #### 오류를 줄이는 프로그래밍 습관!
>
> - 버그가 발생하지 않도록 습관 자체를 바꾸는 것이 좋다.
> - 예를 들어 비교 연산 버그는 다음과 같이 상수를 먼저 사용하는 습관을 들이면 해결할 수 있다.
> ```c
> if(3 == data) // 관계 연산자 == 앞에 상수 3을 먼저 입력함
> ```
> - 이렇게 하면 다음처럼 실수를 하더라도 '상수에 값을 대입할 수 없다'는 문법 오류가 발생하여 잘못된 부분을 바로 찾아서 수정할 수 있다.
> ```c
> if(3 = data) // 문법 오류 발생: 3은 상수이기 때문에 값을 대입할 수 없음
> ```
> - 그리고 상수를 먼저 사용하는 습관은 수치 연산을 할 때도 좋다.
> - 예를 들어 `data + 4 + 7`이라고 하는 것과 `4 + 7 + data`라고 하는 것은 얼핏 같아 보이지만 기계어로는 다르게 번역된다.
> - `data + 4 + 7`은 `((data + 4) + 7)`을 의미하기 때문에 두 개의 덧셈 연산으로 번역되지만, `4 + 7 + data`는 컴파일러가 `11 + data`로 바꾸고 번역하기 때문에 한
    개의 덧셈 연산으로 번역되어 더 효율적이다.

#### 세미콜론으로 인한 오류

- 단일 문장에서 잘못 사용

```c
int data = 3;
if(data > 3);
    data++;  // data가 3이어야 하는데 4가 됨
```

- 복합 문장에서 잘못 사용

```c
int data = 3;
int result = 0;
if(data > 3);
{
    data++;
    result = data;  // data가 3이어야 하는데 4가 됨
}
```

- { 괄호를 조건 수식 뒤에 바로 적는 습관을 들이는 것이 좋다.
- 이렇게 하면 ;(세미콜론)을 잘못 찍을 수 없기 때문에 버그가 나올 확률이 줄어들게 된다.

## 8-3. if ~ else ~ 조건문

- 조건문을 사용하다 보면 상황이 서로 반대되는 조건을 나열해야 할 때가 있다.

```c
if(data == 10) data = 0;  // data == 10이 참이면 data에 0을 저장함
if(data != 10) data++;  // data != 10이 참이면 data값을 1 증가시킴
```

- 위와 같이 진리값이 서로 반대되는 경우에 `if`조건문을 반복해서 쓰는 것은 불필요한 작업이 될 수 있다.
- 위 소스 코드는 다음과 같이 반대 조건을 한 번에 표현하는 `if ~ else ~`형식으로 변경할 수 있다.

```c
if(data == 10) data = 0;
else data++;  // data가 10이 아닌 경우에 수행됨
```

- 이렇게 `if ~ else ~`문을 사용하면 조건 수식은 한 번만 수행된다.

### 단일 if ~ else ~ 문

```c
#include <stdio.h>

void main() {
    int data = 5;  // 명령문 1
    if (3 < data) printf("data는 3보다 큰 수입니다.\n");  // 명령문 2
    else printf("data는 3보다 작거나 같은 수입니다.\n");  // 명령문 3
    printf("작업 종료\n");  // 명령문 4
}
```

```text
data는 3보다 큰 수입니다.
작업 종료
```

### 복합 if ~ else ~ 문

```c
#include <stdio.h>

void main() {
    int score = 92;  // 명령문 1-1
    char grade;  // 명령문 1-2

    if (90 <= score) {
        grade = 'A';  // 명령문 2
        printf("점수는 %d이고 등급은 %c입니다.\n", score, grade);  // 명령문 3
    } else {
        grade = 'B';  // 명령문 4
        printf("점수는 %d이고 등급은 %c입니다.\n", score, grade);  // 명령문 5
    }

    printf("작업 종료\n");  // 명령문 6
}
```

```text
점수는 92이고 등급은 A입니다.
작업 종료
```

> #### 혹시 직접 값을 입력해서 결과를 출력해보고 싶다?
>
> - 직접 입력을 받는 방법은 13장에서 배울 '포인터' 문법을 배워야 이해할 수 있다.
> - 코드만 한번 보자.
> ```c
> #include <stdio.h>
> 
> void main() {
>     int score;
>     char grade;
> 
>     printf("점수를 입력하세요: ");
>     scanf("%d", &score);  // scanf 함수는 사용자에게 입력 받은 값을 score 변수에 저장한다
>                           // scanf 함수는 & 연산자를 반드시 사용해야 한다
>     if(90 <= score) {
>         grade = 'A';
>         printf("점수는 %d이고 등급은 %c입니다.\n", score, grade);
>     } else {
>         grade = 'B';
>         printf("점수는 %d이고 등급은 %c입니다.\n", score, grade);
>     }
> 
>     printf("작업 종료\n");
> }
>```

### if ~ else ~ 조건문과 비슷한 조건 수식 연산자

- 조건 수식 연산자(Conditional-expression Operator)는 `if ~ else ~`조건문과 비슷한 형태를 가지는 연산 수식이다.
- 하지만 조건문과 달리 조건 수식 연산자는 연산자이기 때문에 명령을 처리하고 나면 결과 값을 반환하는 형태로 되어 있다.
- 즉 조건 수식의 결과 값이 참이면 수식1의 결과 값을 사용하고 거짓이면 수식2의 결과 값을 사용한다.

```text
결과 값 = (조건 수식) ? 수식1 : 수식2 ;
```

- 조건 수식 연산자와 `if ~ else ~` 조건문과 다른 점은 조건 수식이 결과 값이 참이 되면 '결과 값 = 수식1'이 되고 거짓이 되면 '결과 값 = 수식2'가 된다는 점이다.
- 단순히 수식만 연산하는 것이 아니라 그 연산의 결과 값을 최종 반환하는 형태로 되어 있다.
- value 값이 10000이상이면 value값에 0.1을 곱해서 point에 저장하고 value값이 10000보다 작으면 value값에 0.05를 곱해서 point에 저장하는 코드

```c
if(10000 <= value) point = value * 0.1;
else point = value * 0.05;
```

```c
// 반환된 연산 결과 값을 point에 저장함
point = (10000 <= value) ? value * 0.1 : value * 0.05;
```

- data가 5보다 크면 1을 반환하고 data가 5보다 작거나 같으면 0을 반환하는 코드

```c
if(5 < data) return 1;  // data가 5보다 크면 1을 반환함
else return 0;  // data가 5보다 작거나 같으면 0을 반환함
```

```c
return (5 < data) ? 1 : 0;
```

- 간결해 보이는 조건 수식 연산자에도 단점은 있다.
- '수식1'과 '수식2'가 값을 반환하는 구조로 되어 있으므로 수식을 단일 문장으로만 표현해야 하고 중괄호 {}를 사용하는 복합 문장은 사용할 수 없다.

## 8-4. 중첩된 if 조건문

- `if`조건문을 사용하다 보면 조건 수식이 만족되어 실행하는 명령문안에 또 조건문이 포함되는 경우가 있는데, 이런 상황을 조건문이 중첩되었다고 한다.
- 중첩의 개수 제한은 없지만, 너무 많이 중첩되면 프로그램의 수행 능력이 떨어지고 이해하기도 어려워지기 때문에 알고리즘을 잘 만들어서 작업해야 한다.

### 중첩된 if 문

```c
#include <stdio.h>

void main() {
    // 2022년 12월 31일을 3개의 정수 변수에 나누어서 대입함
    int year = 2022, month = 12, day = 31;

    // 일을 하루 증가시키면 day가 31에서 32가 됨
    day++;

    // 일이 31일을 초과하면 1일로 바꾸고 월을 증가시킴
    if (31 < day) {
        month++;  // 월을 증가시키면 month가 12에서 13이 됨
        day = 1;  // 월이 증가되었으니 해당 월의 처음인 1일로 변경함

        // 월이 12월을 초과하면 1월로 바꾸고 연도를 증가시킴
        if (12 < month) {
            year++;  // 연도를 1년 증가시키면 year가 2022에서 2023이 됨
            month = 1;  // 연도가 증가되었으니 12월에서 1월로 변경함
        }
    }
    
    printf("Date : %d년 %d월 %d일\n", year, month, day);
}
```

```text
Date : 2023년 1월 1일
```

### 중첩된 if ~ else ~ 문

- 성적에 따라 A, B, C, D, F 등급으로 나누는 예제

```c
#include <stdio.h>

void main() {
    // 점수를 86점으로 설정함
    int score = 86;

    // 점수에 따른 등급을 저장할 변수를 선언함
    char grade;

    if (90 <= score) {                 // 90점 이상인 경우
        grade = 'A';
    } else {                           // 90점 보다 작은 경우
        if (80 <= score) {             // 80점 이상이고 90점보다 작은 경우
            grade = 'B';
        } else {                       // 80점보다 작은 경우
            if (70 <= score) {         // 70점 이상이고 80점보다 작은 경우
                grade = 'C';
            } else {                   // 70점보다 작은 경우
                if (60 <= score) {     // 60점 이상이고 70점보다 작은 경우
                    grade = 'D';
                } else {               // 60점보다 작은 경우
                    grade = 'F';
                }
            }
        }
    }

    // 자신의 점수와 등급을 출력함
    printf("당신의 점수는 %d점이고 등급은 %c입니다.\n", score, grade);
}
```

```text
당신의 점수는 86점이고 등급은 B입니다.
```

### if ~ else if ~ else 조건문

```c
#include <stdio.h>

void main() {
    int score = 86;
    char grade;

    if (90 <= score) grade = 'A';               // 90점 이상
    else {
        if (80 <= score) grade = 'B';           // 80 <= score < 90
        else {
            if (70 <= score) grade = 'C';       // 70 <= score < 80
            else {
                if (60 <= score) grade = 'D';   // 60 <= score < 70
                else grade = 'F';               // 60점보다 작은 경우
            }
        }
    }

    printf("당신의 점수는 %d점이고 등급은 %c입니다.\n", score, grade);
}
```

```text
당신의 점수는 86점이고 등급은 B입니다.
```

- 단일 문장으로 변경한 후 소스 코드를 파익하기 좀 더 편해졌고, 소스도 줄어들었다.

```c
#include <stdio.h>

void main() {
    int score = 86;
    char grade;

    if (90 <= score) grade = 'A';          // 90점 이상
    else if (80 <= score) grade = 'B';     // 80 <= score < 90
    else if (70 <= score) grade = 'C';     // 70 <= score < 80
    else if (60 <= score) grade = 'D';     // 60 <= score < 70
    else grade = 'F';                      // 60점보다 작은 경우
    printf("당신의 점수는 %d점이고 등급은 %c입니다.\n", score, grade);
}
```

```text
당신의 점수는 86점이고 등급은 B입니다.
```

- 위와 같이 `if ~ else ~`문을 중첩해서 사용하면 첫 `if`에서 마지막 `else`사이에 있는 조건문들이 서로 배타적인 조건이 되어서 이 조건들 중에서 한 개만 선택되는 특성이 있다.
- 조건문 중 가장 위에 있는 `90 <= score`이라는 조건 수식이 먼저 처리되고 이 조건 수식의 결과 값이 참이면 나머지 연결된 조건 수식은 처리되지 않고 바로 `printf`문으로 이동한다.
- 위쪽에서 아래쪽으로 수식의 참·거짓 여부를 판단하고 수행하기 때문에 사용 빈도가 높은(결과 값이 참일 가능성이 높은) 조건 수식을 위쪽에 사용하는 것이 좋다.

## switch 조건문

### if문이 비효율적일 경우

- C 언어에서는 모든 조건문을 `if`문으로 표현할 수 있기 때문에 `if`문만 사용해도 문제는 없다.
- 하지만 특정상황에서는 비효율적일 수 있다.
- 만약 성적이 61점이었다면 조건 수식이 4개나 수행되는 경우가 된다.
- 이 조건문의 구성을 보면 `score`변수 값을 계속 특정 상수 값과 비교하여 조건을 판단하고 수행하는 과정에서 `score`값은 변하지 않는다는 것을 알 수 있다.
- 이와 같이 정해진 상수와 조건을 비교하는 경우 `switch`조건문이 더 효율적이다.

### switch 조건문의 기본 구조

- `switch`조건문은 정해진 상수들과 직접적인 비교를 할 수 있는 문법 구조로 되어 있다.
- `switch`조건문은 조건 수식을 포함한 모든 수식을 사용할 수 있으며 그 수식을 처리하여 얻은 결과 값을 각 `case`문에 있는 상수 값과 비교하여 명령문을 수행한다.

#### switch문을 빠져 나오는 break문

- `case`문은 기본적으로 `break`문을 포함한다.
- `break`문은 현재 수행되는 `case`문의 작업을 중단하겠다는 뜻이다.
- 하지만 꼭 `break`문을 사용해야 하는 것은 아니다.
- 의도에 따라서 `break`문을 생략하는 경우도 있는데 이 경우 `break`문이 나올 때까지 계속 아래로 내려오면서 명령문을 수행한다.

#### 조건 수식과 일치하는 case 상수가 없으면 수행하는 default문

- `default`문은 수식의 결과 값이 `case`문을 사용해 열거한 상수들과 일치하는 값이 없는 경우에 수행할 명령을 적는 곳이다.
- `default`문은 반드시 사용해야 하는 것이 아니기 때문에 사용할 필요가 없으면 생략할 수 있다.
- `default`문을 사용하는 위치도 항상 마지막일 필요는 없고, `case`문과 `case`문 사이에 둘 수도 있다.

### switch 조건문과 if ~ else if ~ else문 비교

```c
#include <stdio.h>

void main() {
    int score = 86;
    char grade;

    // 등급을 결정하는 점수가 10단위로 달라지기 때문에 10으로 나눈 몫을 이용하면 특정 숫자와 비교하도록 변경할 수 있다.
    switch (score / 10) {
        case 10:
        case 9:
            grade = 'A';
            break;
        case 8:
            grade = 'B';
            break;
        case 7:
            grade = 'C';
            break;
        case 6:
            grade = 'D';
            break;
        default:
            grade = 'F';
            break;
    }

    printf("당신의 점수는 %d점이고 등급은 %c입니다.\n", score, grade);
}
```

- 지금 같은 경우에는 `switch`문이 연산이 더 적고 간결한 형식으로 나열되어 기계어로 번역하면 더 좋은 기계어 코드가 나온다.
- `switch`문은 수식의 결과 값 또는 변수의 값을 여러 개의 상수 값과 비교하는 데 장점이 있다.
- 하지만 `case`문에 상수가 아닌 변수를 적을 수 없기 때문에 비교 대상이 상수가 아닌 경우에는 `switch`문을 사용할 수 없다는 단점이 있다.
